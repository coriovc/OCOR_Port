<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexGen Marketing | Portafolio Digital</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de la fuente Inter (estilo Apple) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Definición de la paleta de colores a partir de la imagen */
        :root {
            --color-rich-black: #000F01;
            --color-dark-green: #032221;
            --color-caribbean-green: #00FF81;
            --color-mountain-meadow: #0C0C44;
            --color-anti-flash-white: #FFFFF6;
        }

        /* Aplicación de la fuente y fondo oscuro */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-rich-black);
            color: var(--color-anti-flash-white);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Estilo para el efecto Liquid Glass (Frosted Glass) */
        .liquid-glass-card {
            background-color: rgba(3, 34, 33, 0.4); /* Dark Green con transparencia */
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(0, 255, 129, 0.2); /* Caribbean Green semitransparente */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* Estilo para el botón primario */
        .btn-primary {
            background-color: var(--color-caribbean-green);
            color: var(--color-rich-black);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 255, 129, 0.5);
        }

        /* Animación sutil de fondo para dar un toque moderno */
        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        .hero-shape {
            position: absolute;
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, var(--color-caribbean-green), transparent);
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.15;
            animation: moveShape 15s infinite alternate ease-in-out;
        }

        .shape-1 { top: 10%; left: 5%; animation-delay: 0s; }
        .shape-2 { bottom: 20%; right: 10%; animation-delay: 3s; width: 400px; height: 400px; background: linear-gradient(45deg, var(--color-dark-green), transparent); }
        .shape-3 { top: 50%; right: 40%; animation-delay: 6s; width: 200px; height: 200px; background: linear-gradient(90deg, #00C6FF, transparent); }

        @keyframes moveShape {
            0% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, 50px) scale(1.1); }
            100% { transform: translate(0, 0) scale(1); }
        }

        /* Estilo para el efecto hover de las tarjetas */
        .portfolio-item:hover .item-overlay {
            opacity: 1;
            transform: translateY(0);
        }
        .item-overlay {
            transition: opacity 0.3s ease, transform 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            backdrop-filter: blur(5px); /* Desenfoque adicional para la interacción */
            -webkit-backdrop-filter: blur(5px);
        }

        .spinner {
            border: 4px solid rgba(0, 255, 129, 0.2);
            border-top: 4px solid var(--color-caribbean-green);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- NUEVO: Estilo para el efecto de parpadeo/flicker en el texto --- */
        .flicker-text {
            animation: flicker 4s infinite alternate; /* Animación principal para el parpadeo */
        }

        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                text-shadow: 
                    -1px -1px 4px var(--color-caribbean-green), 
                    1px 1px 4px var(--color-caribbean-green);
                opacity: 1;
                transform: skewX(0);
            }
            20%, 24%, 55% {
                /* Efecto de glitch más intenso */
                text-shadow: 
                    -1px -1px 20px rgba(0, 255, 129, 0.8),
                    1px 1px 20px rgba(0, 255, 129, 0.8),
                    0 0 40px rgba(0, 255, 129, 0.5);
                opacity: 0.8;
                transform: skewX(-3deg); /* Ligero skew para efecto glitch */
            }
        }
    </style>
</head>

<body>
    <!-- Fondo Animado -->
    <div class="hero-background">
        <div class="hero-shape shape-1"></div>
        <div class="hero-shape shape-2"></div>
        <div class="hero-shape shape-3"></div>
    </div>

    <!-- Navegación -->
    <header class="w-full max-w-7xl mx-auto p-4 lg:p-8 z-10 sticky top-0" style="z-index: 2000;">
        <nav class="liquid-glass-card p-4 rounded-xl flex justify-between items-center">
            <div class="text-xl font-bold flex items-center">
                <span class="text-3xl font-extrabold text-caribbean-green-500 mr-2" style="color: var(--color-caribbean-green);">N</span>
                NexGen <span class="hidden sm:inline ml-1 font-light opacity-80">Marketing</span>
            </div>
            <div class="flex space-x-4">
                <a href="#portafolio" class="text-sm font-medium hover:text-caribbean-green-300 transition-colors">Portafolio</a>
                <a href="#servicios" class="text-sm font-medium hover:text-caribbean-green-300 transition-colors hidden sm:inline">Servicios</a>
                <a href="#contacto" class="btn-primary px-3 py-1 rounded-full text-xs sm:text-sm font-semibold">
                    Contacto
                </a>
            </div>
        </nav>
    </header>

    <!-- Sección Principal (Hero) -->
    <main class="w-full max-w-7xl mx-auto p-4 lg:p-8 flex-grow z-10">
        <section id="hero" class="text-center py-20 lg:py-32">
            <h1 class="text-4xl sm:text-6xl lg:text-7xl font-extrabold tracking-tight mb-4 leading-tight">
                Diseñando el <span class="flicker-text" style="color: var(--color-caribbean-green);">Futuro</span>
                <br class="hidden sm:block">
                del Marketing Digital.
            </h1>
            <p class="text-lg sm:text-xl max-w-3xl mx-auto mb-8 opacity-70">
                Estrategias que no solo se ven bien, sino que venden. Exploramos el límite entre el arte y la analítica.
            </p>
            <a href="#portafolio" class="btn-primary inline-block px-8 py-3 rounded-full font-bold text-lg shadow-xl">
                Ver Portafolio
            </a>
        </section>

        <!-- Portafolio de Proyectos -->
        <section id="portafolio" class="pt-16 pb-32">
            <h2 class="text-3xl sm:text-4xl font-bold mb-12 text-center">Nuestros Trabajos Destacados</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                <!-- Ítem 1 -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=Marca+E-commerce" alt="Proyecto de Branding para Tienda Online" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Branding E-commerce</h3>
                        <p class="text-sm opacity-70">Diseño completo de identidad visual y experiencia de usuario para una tienda de moda sostenible.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #DiseñoWeb
                        </span>
                    </div>

                    <!-- Overlay (Efecto Apple al pasar el ratón) -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Branding E-commerce para tienda de moda sostenible')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

                <!-- Ítem 2 -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=Campaña+SEO" alt="Campaña SEO y Content Marketing" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Estrategia de Contenido</h3>
                        <p class="text-sm opacity-70">Aumento del 300% en tráfico orgánico mediante una estrategia SEO enfocada en Nichos de Mercado.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #SEO
                        </span>
                    </div>

                    <!-- Overlay -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Estrategia de Contenido y SEO en Nichos de Mercado')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

                <!-- Ítem 3 -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=Social+Media" alt="Gestión y Estrategia de Redes Sociales" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Automatización de RRSS</h3>
                        <p class="text-sm opacity-70">Desarrollo de chatbots y secuencias de engagement para Instagram y Facebook, generando leads calificados.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #Automatización
                        </span>
                    </div>

                    <!-- Overlay -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Automatización y Generación de Leads Calificados en Redes Sociales')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

                <!-- Ítem 4 (Ejemplo Adicional) -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=Analítica+Avanzada" alt="Dashboards de Analítica de Datos" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Visualización de Datos</h3>
                        <p class="text-sm opacity-70">Implementación de dashboards avanzados para monitoreo de KPIs en tiempo real.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #Data
                        </span>
                    </div>

                    <!-- Overlay -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Implementación de Dashboards Avanzados para Monitoreo de KPIs')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

                <!-- Ítem 5 -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=PPC+y+Ads" alt="Campaña de Publicidad Digital" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Publicidad de Alto Impacto</h3>
                        <p class="text-sm opacity-70">Campaña de Google Ads y Social Ads que generó un ROAS de 5:1 en el primer trimestre.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #PPC
                        </span>
                    </div>

                    <!-- Overlay -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Campaña de Publicidad de Alto Impacto en Google Ads y Social Ads')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

                <!-- Ítem 6 -->
                <div class="portfolio-item liquid-glass-card rounded-2xl overflow-hidden group cursor-pointer relative">
                    <img src="https://placehold.co/600x400/032221/00FF81?text=Landing+Page" alt="Diseño de Landing Page de Conversión" class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105">
                    
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-caribbean-green);">Optimización de Conversión</h3>
                        <p class="text-sm opacity-70">Rediseño de landing pages resultando en un incremento del 45% en la tasa de conversión de leads.</p>
                        <span class="mt-3 inline-block text-xs font-medium px-3 py-1 rounded-full bg-caribbean-green-900" style="background-color: var(--color-dark-green);">
                            #CRO
                        </span>
                    </div>

                    <!-- Overlay -->
                    <div class="item-overlay absolute inset-0 bg-rich-black bg-opacity-80 flex flex-col justify-center items-center text-center p-4">
                        <p class="text-lg font-bold mb-4">¿Quieres un resumen ejecutivo? ✨</p>
                        <button onclick="openGeminiAnalysis('Optimización de Conversión (CRO) y Rediseño de Landing Pages')" class="btn-primary px-6 py-2 rounded-full font-semibold">
                            Generar Insight
                        </button>
                    </div>
                </div>

            </div>
        </section>

        <!-- Sección de Contacto (simulada) -->
        <section id="contacto" class="py-20 text-center">
            <div class="liquid-glass-card max-w-2xl mx-auto p-10 rounded-3xl">
                <h2 class="text-3xl font-bold mb-4">¿Listo para Impulsar tu Marca?</h2>
                <p class="text-lg mb-6 opacity-80">Conversemos sobre tu próximo proyecto digital. Te respondemos en menos de 24 horas.</p>
                <button onclick="showMessage()" class="btn-primary px-8 py-3 rounded-full font-bold text-lg">
                    Inicia la Conversación
                </button>
            </div>
        </section>

    </main>

    <!-- Pie de página -->
    <footer class="w-full max-w-7xl mx-auto mt-10 p-4 lg:p-8 border-t border-dark-green text-center text-sm opacity-50">
        <p>&copy; 2025 NexGen Marketing. Diseñado con visión.</p>
    </footer>

    <!-- Modal/Mensajebox para simular el contacto (en lugar de alert) -->
    <div id="messageBox" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center p-4 z-50">
        <div class="liquid-glass-card p-8 rounded-xl max-w-sm w-full text-center">
            <h3 class="text-xl font-bold mb-4" style="color: var(--color-caribbean-green);">¡Gracias!</h3>
            <p class="mb-6">Tu mensaje ha sido enviado (simulación). Un experto de NexGen se pondrá en contacto pronto.</p>
            <button onclick="hideMessage()" class="btn-primary px-6 py-2 rounded-full font-semibold">
                Cerrar
            </button>
        </div>
    </div>

    <!-- Modal de Análisis Gemini -->
    <div id="geminiModal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center p-4 z-50">
        <div class="liquid-glass-card p-8 rounded-xl max-w-lg w-full">
            <h3 id="geminiModalTitle" class="text-2xl font-bold mb-4" style="color: var(--color-caribbean-green);">
                Análisis de Proyecto
            </h3>
            <div id="geminiModalContent">
                <!-- Contenido generado por IA o spinner/mensaje -->
            </div>
            <div class="flex justify-end mt-6">
                <button onclick="hideGeminiModal()" class="btn-primary px-6 py-2 rounded-full font-semibold">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <script>
        // Configuración de la API de Gemini
        const apiKey = "";
        const model = 'gemini-2.5-flash-preview-09-2025';

        /**
         * Llama a la API de Gemini con retries y Google Search Grounding.
         * @param {string} userQuery - La consulta principal.
         * @param {string} systemPrompt - La instrucción del sistema.
         * @returns {Promise<{text: string, sources: {uri: string, title: string}[]}>}
         */
        async function geminiApiCall(userQuery, systemPrompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
            
            // Queries en inglés y español para el search grounding
            const searchQueries = [
                userQuery,
                'Digital Marketing Trends ' + userQuery.substring(userQuery.lastIndexOf('sobre:') + 6).trim()
            ];

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                tools: [{ "google_search": {} }], // Herramienta de Google Search para Grounding
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            let response;
            let retries = 0;
            const maxRetries = 3;
            let delay = 1000;

            while (retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 429) { // Too Many Requests
                            retries++;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                            continue; // Retry loop
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        const text = candidate.content.parts[0].text;
                        let sources = [];
                        const groundingMetadata = candidate.content?.parts?.[0]?.groundingMetadata;

                        if (groundingMetadata && groundingMetadata.groundingAttributions) {
                            sources = groundingMetadata.groundingAttributions
                                .map(attribution => ({
                                    uri: attribution.web?.uri,
                                    title: attribution.web?.title,
                                }))
                                .filter(source => source.uri && source.title);
                        }
                        return { text, sources };
                    } else {
                        return { text: "No se pudo generar una respuesta útil. Intenta de nuevo.", sources: [] };
                    }

                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    retries++;
                    if (retries >= maxRetries) {
                        return { text: `Error de conexión: ${error.message}`, sources: [] };
                    }
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        }


        // --- Funciones del Modal de Contacto (simulado) ---

        function showMessage() {
            document.getElementById('messageBox').classList.remove('hidden');
            document.getElementById('messageBox').classList.add('flex');
        }

        function hideMessage() {
            document.getElementById('messageBox').classList.add('hidden');
            document.getElementById('messageBox').classList.remove('flex');
        }


        // --- Funciones del Modal Gemini (Nuevo) ---

        function showGeminiModal() {
            document.getElementById('geminiModal').classList.remove('hidden');
            document.getElementById('geminiModal').classList.add('flex');
        }

        function hideGeminiModal() {
            document.getElementById('geminiModal').classList.add('hidden');
            document.getElementById('geminiModal').classList.remove('flex');
        }

        function openGeminiAnalysis(projectTitle) {
            const modalTitle = document.getElementById('geminiModalTitle');
            const modalContent = document.getElementById('geminiModalContent');
            
            modalTitle.textContent = `Insight sobre: ${projectTitle}`;

            // Mostrar estado de carga (Spinner)
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="spinner"></div>
                    <p class="text-lg opacity-80">Analizando las últimas tendencias de marketing...</p>
                </div>
            `;
            showGeminiModal();

            // Llamar a la función de análisis
            generateAnalysis(projectTitle);
        }

        async function generateAnalysis(projectTitle) {
            const modalContent = document.getElementById('geminiModalContent');
            const systemPrompt = "Actúa como un consultor de marketing de alto nivel. Genera un resumen ejecutivo conciso (máximo 40 palabras) y un hallazgo clave (Key Takeaway) para un proyecto de marketing digital sobre el tema proporcionado. Responde en español y usa formato Markdown. El título del hallazgo clave debe ser 'Hallazgo Clave'.";
            const userQuery = `Analiza las tendencias de mercado y genera un resumen ejecutivo sobre el siguiente tipo de proyecto: ${projectTitle}.`;

            const { text, sources } = await geminiApiCall(userQuery, systemPrompt);

            // Reemplazar spinner con contenido
            let htmlContent = `<div class="p-4">${text.replace(/\n/g, '<br>')}</div>`;

            if (sources.length > 0) {
                const sourceList = sources.map(source => 
                    `<li class="text-xs opacity-60 truncate"><a href="${source.uri}" target="_blank" class="hover:underline">${source.title}</a></li>`
                ).join('');
                htmlContent += `
                    <div class="mt-4 pt-4 border-t border-dark-green text-left">
                        <p class="text-sm font-semibold mb-2">Fuentes Consultadas:</p>
                        <ul class="list-disc ml-4 space-y-1">${sourceList}</ul>
                    </div>
                `;
            }

            modalContent.innerHTML = htmlContent;
        }


        // Script para cambiar la opacidad de la barra de navegación al hacer scroll (efecto Apple)
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('nav');
            if (window.scrollY > 50) {
                // Barra de navegación con más transparencia al bajar (más líquido)
                nav.style.backgroundColor = 'rgba(3, 34, 33, 0.6)'; 
            } else {
                // Barra de navegación con menos transparencia al inicio
                nav.style.backgroundColor = 'rgba(3, 34, 33, 0.4)';
            }
        });
    </script>
</body>
</html>